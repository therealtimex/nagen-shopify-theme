{% comment %}
  Page Share Snippet
  Renders social share actions with theme icon snippets.
  URLs are hydrated by assets/page-share.js (including affiliate decoration).

  Usage:
  {% render 'page-share' %}
{% endcomment %}

{{ 'page-share.css' | asset_url | stylesheet_tag }}
<script src="{{ 'page-share.js' | asset_url }}" defer></script>

{%- assign share_url = canonical_url | default: request.origin -%}
{%- assign share_title = page_title | default: page.title | strip_html | strip -%}

<div class="page-share" data-share-url="{{ share_url }}" data-share-title="{{ share_title | escape }}">
  <div class="page-share__label">{{ 'general.share.share_url' | t | default: 'Chia sẻ' }}</div>

  <div class="page-share__list">
    <a
      class="page-share__item page-share__item--facebook"
      href="https://www.facebook.com/sharer/sharer.php?u={{ share_url | url_param_escape }}"
      target="_blank"
      rel="noopener"
      aria-label="Share on Facebook"
      data-platform="facebook"
    >
      {% render 'icon-facebook' %}
    </a>

    <a
      class="page-share__item page-share__item--x"
      href="https://twitter.com/intent/tweet?text={{ share_title | url_param_escape }}&url={{ share_url | url_param_escape }}"
      target="_blank"
      rel="noopener"
      aria-label="Share on X"
      data-platform="x"
    >
      {% render 'icon-twitter' %}
    </a>

    <a
      class="page-share__item page-share__item--email"
      href="mailto:?subject={{ share_title | url_param_escape }}&body={{ share_url | url_param_escape }}"
      aria-label="Share by email"
      data-platform="email"
    >
      {% render 'icon-email' %}
    </a>

    <button
      class="page-share__item page-share__item--copy"
      type="button"
      aria-label="Copy link"
      title="Copy link"
      data-share-copy
    >
      {% render 'icon-clipboard' %}
      <span class="page-share__tooltip">Đã sao chép!</span>
    </button>
  </div>
</div>

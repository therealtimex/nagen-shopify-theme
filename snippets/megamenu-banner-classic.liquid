{%- liquid
    assign link_column = ''
    assign menu_column = block.settings.menu_column
    assign menu_banner_width = block.settings.menu_banner_width
    assign menu_width = block.settings.menu_width
    assign enable_menu_banner = block.settings.enable_menu_banner
    assign menu_title = block.settings.menu_title | strip | downcase 

    case menu_column
      when 1
      assign link_column = 'col-sm-12'
      when 2
      assign link_column = 'col-sm-6'
      when 3
      assign link_column = 'col-sm-4'
      when 4
      assign link_column = 'col-sm-3'
      when 5
      assign link_column = 'col-1-5'
      when 6  
      assign link_column = 'col-sm-2'
      else 
      assign link_column = 'col-sm-2'
    endcase
  -%}
  <div class="{{ menu_width }}">
    <div class="row">
      {%- if link.links != blank -%}
      <div class="mega-menu__column mega-col mega-link {% if enable_menu_banner == false %} col-12 {% else %} col {% endif %} {% if menu_title == "home" %} d-lg-none d-block{% endif %}">
        <div class="row">
          {%- if link.links != blank -%}
          {%- for childlink in link.links -%}
          <div class="{{ link_column }}">
            <div class="mega-col-inner ">
              <div class="menu-title">
                <a href="{{ childlink.url }}" >
                  {%- render 'processMenuTitle' , itemName: childlink.title -%}
                  {%- render 'processMenuLabel' , itemName: childlink.title -%}
                </a>
              </div>
              <div class="widget-inner">
                <ul class="nav-links">
                  {%- if childlink.links != blank -%}
                  {%- for grandchildlink in childlink.links -%}
                  <li>
                    <a href="{{ grandchildlink.url }}" >
                      {%- render 'processMenuTitle' , itemName: grandchildlink.title -%}
                      {%- render 'processMenuLabel' , itemName: grandchildlink.title -%}
                    </a>
                  </li>
                  {%- endfor -%}
                  {%- endif -%}
                </ul>
              </div>
            </div>
          </div>
          {%- endfor -%}
          {%- endif -%}
        </div>
      </div>
      {%- endif -%}
  
      {% if block.settings.enable_menu_banner %}
        <div class="mega-menu__column mega-col col" style="max-width:{{ menu_banner_width }}%;flex:0 0 {{ menu_banner_width }}%;">    
          <div class="row">
            {% for i in (1..6) %}
                {%- liquid
                    assign menu_banner_image_var = 'menu_banner_image_' | append: i 
                    assign menu_banner_html_var = 'menu_banner_html_' | append: i 
                    assign menu_banner_btn_var = 'menu_banner_btn_' | append: i 
                    assign menu_banner_link_var = 'menu_banner_link_' | append: i 
                    
                    assign menu_banner_image = block.settings[menu_banner_image_var]
                    assign menu_banner_html = block.settings[menu_banner_html_var]
                    assign menu_banner_btn = block.settings[menu_banner_btn_var]
                    assign menu_banner_link = block.settings[menu_banner_link_var]
                -%}
                {%- if menu_banner_image != blank -%}
                    <div class="promotionclassic_menu col">
                        <div class="image-content__image-container overflow-hidden text-center">
                            <a href="{{ menu_banner_link }}" class="image-content__image-wrapper promotionclassic__image {{ block.settings.image_size }}" style="padding-top:{{ 1 | divided_by: menu_banner_image.aspect_ratio | times: 100 }}%;">
                                <img src="{{ menu_banner_image | image_url: width: 3000 }}" class="mega-menu__image"
                                data-srcset="{{ menu_banner_image | image_url: width: 400 }} 400w, {{ menu_banner_image | image_url: width: 500 }} 500w, {{ menu_banner_image | image_url: width: 600 }} 600w, {{ menu_banner_image | image_url: width: 700 }} 700w, {{ menu_banner_image | image_url: width: 800 }} 800w, {{ menu_banner_image | image_url: width: 900 }} 900w, {{ menu_banner_image | image_url: width: 1000 }} 1000w, {{ menu_banner_image | image_url: width: 1200 }} 1200w, {{ menu_banner_image | image_url: width: 3000 }} 1400w" 
                                loading="eager" draggable="false" sizes="100vw" width="3000" height="4204">
                            </a>
                            <div class="promotionclassic_menu--content">
                                <div class="promotionclassic_menu--txt">
                                    {%- if menu_banner_html != blank -%}
                                        <div class="my-3"> {{ menu_banner_html }}</div>
                                    {%- endif -%}
                                    {%- if menu_banner_btn != blank -%}
                                        <a href="{{ menu_banner_link }}"> {{ menu_banner_btn }}</a>
                                    {%- endif -%}
                                </div>
                            </div>
                        </div>
                      </div>
                {%- endif -%}
            {% endfor %}
          </div>
         
          
        </div>
      {% endif %}
    </div>
  </div>
  
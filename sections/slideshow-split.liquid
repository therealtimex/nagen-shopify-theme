{%- style -%}
  #shopify-section-{{ section.id }} {
    --slideshow-width: {{ section.settings.slideshow_width }}%;
    --gap: {{ section.settings.gap }}px;
    --border-radius: {{ section.settings.border_radius }}px;
    --desktop-height: {{ section.settings.desktop_height }}px;
    --mobile-aspect-ratio: {{ section.settings.mobile_aspect_ratio }};
  }

  .slideshow-split__container {
    display: flex;
    gap: var(--gap);
    align-items: stretch;
    width: 100%;
  }

  .slideshow-split__main {
    width: var(--slideshow-width);
    flex-shrink: 0;
    position: relative;
    border-radius: var(--border-radius);
    overflow: hidden;
    height: var(--desktop-height) !important;
  }

  .slideshow-split__static {
    width: calc(100% - var(--slideshow-width) - var(--gap));
    display: flex;
    flex-direction: column;
    gap: var(--gap);
    flex-grow: 1;
    height: var(--desktop-height) !important;
    border-radius: var(--border-radius);
    overflow: hidden;
  }

  .slideshow-split__static-item {
    flex: 1;
    position: relative;
    border-radius: var(--border-radius);
    overflow: hidden;
    height: 100%;
  }

  .slideshow-split__image-link {
    display: block;
    width: 100%;
    height: 100%;
  }

  .slideshow-split__image-link img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* Swiper Customization */
  .slideshow-split .swiper {
    width: 100% !important;
    height: 100% !important;
    position: relative;
    border-radius: inherit;
  }

  .slideshow-split .swiper-wrapper {
    height: 100% !important;
  }

  .slideshow-split .swiper-slide {
    height: 100% !important;
    border-radius: inherit;
    overflow: hidden;
  }

  .slideshow-split .swiper-pagination {
    bottom: 20px !important;
    left: 0 !important;
    width: 100% !important;
    z-index: 20;
    display: flex !important;
    justify-content: center !important;
    gap: 8px;
    transform: none !important; /* Remove translate centering */
    pointer-events: none; /* Let clicks pass through if not on dots */
    position: absolute !important; /* Force absolute positioning on Desktop too */
  }

  .slideshow-split .swiper-pagination-bullet {
    background: #fff !important;
    opacity: 0.6 !important;
    width: 10px !important;
    height: 10px !important;
    margin: 0 !important;
    transition: all 0.3s ease;
    border-radius: 50%;
    cursor: pointer;
    display: block !important;
    pointer-events: auto; /* Re-enable clicks */
    box-shadow: 0 1px 3px rgba(0,0,0,0.3); /* Add shadow for visibility on light bg */
  }

  .slideshow-split .swiper-pagination-bullet-active {
    background: var(--primary, #21395d) !important;
    opacity: 1 !important;
    width: 25px !important;
    border-radius: 5px !important;
  }

  .slideshow-split .swiper-arrow {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    transform: none;
    z-index: 60;
    pointer-events: auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }

  /* Show arrows only when hovering the active carousel area */
  .slideshow-split__main:hover .swiper-arrow,
  .slideshow-split__static:hover .swiper-arrow {
    opacity: 1;
    visibility: visible;
  }

  .slideshow-split .swiper-button-next,
  .slideshow-split .swiper-button-prev {
    color: #fff;
    background: rgba(0,0,0,0.3);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    position: static; /* Reset absolute positioning since parent handles it */
    margin: 0; /* Reset margins */
    background: rgba(0,0,0,0.6);
  }

  .slideshow-split .swiper-button-next:after,
  .slideshow-split .swiper-button-prev:after {
    display: none; /* Hide default Swiper font icons */
    content: none;
  }

  @media (max-width: 991px) {
    .slideshow-split .swiper-arrow {
      opacity: 1;
      visibility: visible;
      padding: 0 12px;
    }

    .slideshow-split__main,
    .slideshow-split__static {
      height: auto !important;
    }
    .slideshow-split__container {
      flex-direction: column;
    }
    .slideshow-split__main,
    .slideshow-split__static {
      width: 100%;
    }
    .slideshow-split__static {
      flex-direction: row;
    }
    .slideshow-split__main {
      aspect-ratio: 16 / 8;
    }
    /* Fix mobile height for static side - allow vertical growth */
    .slideshow-split__static-item {
      aspect-ratio: auto;
      min-aspect-ratio: 16 / 8;
      height: auto !important;
    }
    .slideshow-split .swiper-slide {
      height: auto !important; /* Allow slides to grow on mobile */
    }

    /* Mobile Video Fix: Force square/portrait ratio to prevent collapse */
    .slideshow-split__static-item--video {
      aspect-ratio: var(--mobile-aspect-ratio) !important;
      min-height: 0;
      height: auto !important;
      display: block;
      width: 100%;
      object-fit: cover;
      border-radius: var(--border-radius); /* Apply radius */
      overflow: hidden; /* Clip corners */
      isolation: isolate; /* Force stacking context for Safari radius */
      transform: translateZ(0); /* Force radius hardware accel */
    }
    /* Ensure video facade respects the new aspect ratio logic */
     .slideshow-split__video-container {
      height: 100% !important;
      border-radius: inherit; /* Inherit from item */
      overflow: hidden;
      isolation: isolate;
    }
    
    .slideshow-split .swiper-pagination {
      bottom: 15px !important; /* safe spacing */
      z-index: 50 !important; /* Ensure on top of everything */
      position: absolute !important;
    }
  }

  @media (max-width: 575px) {
    .slideshow-split__static {
      flex-direction: column;
    }
  }
  .slideshow-split__video-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .slideshow-split__video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none; /* Default: no interaction for bg video */
  }

  .slideshow-split__video--controls {
    pointer-events: auto !important; /* Enable controls if requested */
  }

{%- endstyle -%}

{% render 'section-style' %}

<section class="section section--flush shopify-section--slideshow slideshow-split {{ section.settings.class }}" data-section-id="{{ section.id }}">
  <div class="shopify-container">
    <div class="slideshow-split__container">
      
      {%- assign slide_blocks = section.blocks | where: 'type', 'slide' -%}
      {%- if slide_blocks.size > 0 -%}
        <div class="slideshow-split__main">
          <div id="swiper-{{ section.id }}" class="slideshow swiper ap-object-loaded" 
            data-autoplay="{{ section.settings.autoplay }}"
            data-speed="{{ section.settings.autoplay_speed | times: 1000 }}"
            data-navigation="{{ section.settings.show_navigation }}"
            data-pagination="{{ section.settings.show_pagination }}">
            
            <div class="swiper-wrapper">
              {%- for block in slide_blocks -%}
                <div class="swiper-slide" {{ block.shopify_attributes }}>
                  {%- if block.settings.video != blank -%}
                    <div class="slideshow-split__video-container">
                      {%- liquid
                        assign video_class = 'slideshow-split__video'
                        if section.settings.autoplay_video == false
                          assign video_class = video_class | append: ' slideshow-split__video--controls'
                        endif
                      -%}
                      {{ block.settings.video | video_tag: 
                        image_size: '2000x', 
                        autoplay: section.settings.autoplay_video, 
                        loop: section.settings.autoplay_video, 
                        muted: section.settings.autoplay_video, 
                        controls: block.settings.show_controls,
                        class: video_class
                      }}
                    </div>
                  {%- elsif block.settings.video_url != blank -%}
                    <div class="slideshow-split__video-container">
                      {%- if block.settings.video_url.type == 'youtube' -%}
                        <iframe id="yt-player-{{ block.id }}" src="https://www.youtube.com/embed/{{ block.settings.video_url.id }}?enablejsapi=1&autoplay={% if section.settings.autoplay_video %}1{% else %}0{% endif %}&mute={% if section.settings.autoplay_video %}1{% else %}0{% endif %}&loop={% if section.settings.autoplay_video %}1{% else %}0{% endif %}&playlist={{ block.settings.video_url.id }}&controls={{ block.settings.show_controls | default: 0 }}&playsinline=1&rel=0" class="slideshow-split__video {% unless section.settings.autoplay_video %}slideshow-split__video--controls{% endunless %}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                      {%- elsif block.settings.video_url.type == 'vimeo' -%}
                         <iframe src="https://player.vimeo.com/video/{{ block.settings.video_url.id }}?autoplay={% if section.settings.autoplay_video %}1{% else %}0{% endif %}&muted={% if section.settings.autoplay_video %}1{% else %}0{% endif %}&loop={% if section.settings.autoplay_video %}1{% else %}0{% endif %}&background=1" class="slideshow-split__video {% unless section.settings.autoplay_video %}slideshow-split__video--controls{% endunless %}" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
                      {%- endif -%}
                    </div>
                  {%- else -%}
                    {%- if block.settings.link != blank -%}
                      <a href="{{ block.settings.link }}" class="slideshow-split__image-link">
                    {%- else -%}
                      <div class="slideshow-split__image-link">
                    {%- endif -%}
                      
                      {%- if block.settings.image != blank -%}
                        {{ block.settings.image | image_url: width: 2000 | image_tag: loading: 'lazy', class: 'slideshow-split__image' }}
                      {%- else -%}
                        {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                      {%- endif -%}

                    {%- if block.settings.link != blank -%}
                      </a>
                    {%- else -%}
                      </div>
                    {%- endif -%}
                  {%- endif -%}
                </div>
              {%- endfor -%}
            </div>

            {%- if section.settings.show_pagination -%}
              <div class="swiper-pagination swiper-pagination_{{ section.id }}"></div>
            {%- endif -%}

            {%- if section.settings.show_navigation -%}
              <div class="swiper-arrow">
                <div class="swiper-button-prev swiper-button-prev_{{ section.id }}">
                  <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.757812 5.34375L4.32031 9.09375C4.50781 9.28125 4.73438 9.375 5 9.375C5.25 9.375 5.46875 9.28906 5.65625 9.11719C5.84375 8.94531 5.9375 8.72656 5.9375 8.46094C5.9375 8.19531 5.85156 7.96875 5.67969 7.78125L3.61719 5.625H10.0625C10.3281 5.625 10.5547 5.53906 10.7422 5.36719C10.9141 5.17969 11 4.95312 11 4.6875C11 4.42188 10.9141 4.20312 10.7422 4.03125C10.5547 3.84375 10.3281 3.75 10.0625 3.75H3.61719L5.67969 1.59375C5.85156 1.40625 5.9375 1.17969 5.9375 0.914062C5.9375 0.648438 5.84375 0.429688 5.65625 0.257812C5.46875 0.0859375 5.24219 0 4.97656 0C4.71094 0 4.49219 0.09375 4.32031 0.28125L0.757812 4.03125C0.585938 4.21875 0.5 4.4375 0.5 4.6875C0.5 4.9375 0.585938 5.15625 0.757812 5.34375Z" fill="currentColor" /></svg>
                </div>
                <div class="swiper-button-next swiper-button-next_{{ section.id }}">
                  <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.2422 5.34375L6.67969 9.09375C6.49219 9.28125 6.26562 9.375 6 9.375C5.75 9.375 5.53125 9.28906 5.34375 9.11719C5.15625 8.94531 5.0625 8.72656 5.0625 8.46094C5.0625 8.19531 5.14844 7.96875 5.32031 7.78125L7.38281 5.625H0.9375C0.671875 5.625 0.445312 5.53906 0.257812 5.36719C0.0859375 5.17969 0 4.95312 0 4.6875C0 4.42188 0.0859375 4.20312 0.257812 4.03125C0.445312 3.84375 0.671875 3.75 0.9375 3.75H7.38281L5.32031 1.59375C5.14844 1.40625 5.0625 1.17969 5.0625 0.914062C5.0625 0.648438 5.15625 0.429688 5.34375 0.257812C5.53125 0.0859375 5.75781 0 6.02344 0C6.28906 0 6.50781 0.09375 6.67969 0.28125L10.2422 4.03125C10.4141 4.21875 10.5 4.4375 10.5 4.6875C10.5 4.9375 10.4141 5.15625 10.2422 5.34375Z" fill="currentColor"/></svg>
                </div>
              </div>
            {%- endif -%}
          </div>
        </div>
      {%- endif -%}

      {%- assign static_blocks = section.blocks | where: 'type', 'static_banner' -%}
      {%- if static_blocks.size > 0 -%}
        <div class="slideshow-split__static">
          
          {%- if section.settings.right_mode == 'carousel' -%}
            <!-- Carousel Mode (Right Side) -->
            <div id="swiper-right-{{ section.id }}" class="slideshow swiper ap-object-loaded" 
              data-autoplay="{{ section.settings.autoplay }}"
              data-speed="{{ section.settings.autoplay_speed | times: 1000 }}"
              data-navigation="{{ section.settings.show_navigation }}"
              data-pagination="{{ section.settings.show_pagination }}"
              data-direction="{{ section.settings.right_slide_direction }}">
              
              <div class="swiper-wrapper">
                {%- for block in static_blocks -%}
                  {%- liquid
                    assign has_video = false
                    if block.settings.video != blank or block.settings.video_url != blank
                      assign has_video = true
                    endif
                  -%}
                  <div class="swiper-slide {% if has_video %}slideshow-split__static-item--video{% endif %}" {{ block.shopify_attributes }}>
                    {%- render 'slideshow-split-content', block: block, autoplay_video: section.settings.autoplay_video -%}
                  </div>
                {%- endfor -%}
              </div>

              {%- if section.settings.show_pagination -%}
                <div class="swiper-pagination swiper-pagination-right_{{ section.id }}"></div>
              {%- endif -%}

              {%- if section.settings.show_navigation -%}
                <div class="swiper-arrow">
                  <div class="swiper-button-prev swiper-button-prev-right_{{ section.id }}">
                    <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.757812 5.34375L4.32031 9.09375C4.50781 9.28125 4.73438 9.375 5 9.375C5.25 9.375 5.46875 9.28906 5.65625 9.11719C5.84375 8.94531 5.9375 8.72656 5.9375 8.46094C5.9375 8.19531 5.85156 7.96875 5.67969 7.78125L3.61719 5.625H10.0625C10.3281 5.625 10.5547 5.53906 10.7422 5.36719C10.9141 5.17969 11 4.95312 11 4.6875C11 4.42188 10.9141 4.20312 10.7422 4.03125C10.5547 3.84375 10.3281 3.75 10.0625 3.75H3.61719L5.67969 1.59375C5.85156 1.40625 5.9375 1.17969 5.9375 0.914062C5.9375 0.648438 5.84375 0.429688 5.65625 0.257812C5.46875 0.0859375 5.24219 0 4.97656 0C4.71094 0 4.49219 0.09375 4.32031 0.28125L0.757812 4.03125C0.585938 4.21875 0.5 4.4375 0.5 4.6875C0.5 4.9375 0.585938 5.15625 0.757812 5.34375Z" fill="currentColor" /></svg>
                  </div>
                  <div class="swiper-button-next swiper-button-next-right_{{ section.id }}">
                    <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.2422 5.34375L6.67969 9.09375C6.49219 9.28125 6.26562 9.375 6 9.375C5.75 9.375 5.53125 9.28906 5.34375 9.11719C5.15625 8.94531 5.0625 8.72656 5.0625 8.46094C5.0625 8.19531 5.14844 7.96875 5.32031 7.78125L7.38281 5.625H0.9375C0.671875 5.625 0.445312 5.53906 0.257812 5.36719C0.0859375 5.17969 0 4.95312 0 4.6875C0 4.42188 0.0859375 4.20312 0.257812 4.03125C0.445312 3.84375 0.671875 3.75 0.9375 3.75H7.38281L5.32031 1.59375C5.14844 1.40625 5.0625 1.17969 5.0625 0.914062C5.0625 0.648438 5.15625 0.429688 5.34375 0.257812C5.53125 0.0859375 5.75781 0 6.02344 0C6.28906 0 6.50781 0.09375 6.67969 0.28125L10.2422 4.03125C10.4141 4.21875 10.5 4.4375 10.5 4.6875C10.5 4.9375 10.4141 5.15625 10.2422 5.34375Z" fill="currentColor"/></svg>
                  </div>
                </div>
              {%- endif -%}
            </div>

          {%- else -%}
            <!-- Stacked Mode (Legacy 2 items) -->
            {%- for block in static_blocks limit: 2 -%}
              {%- liquid
                assign has_video = false
                if block.settings.video != blank or block.settings.video_url != blank
                  assign has_video = true
                endif
              -%}
              <div class="slideshow-split__static-item {% if has_video %}slideshow-split__static-item--video{% endif %}" {{ block.shopify_attributes }}>
                {%- render 'slideshow-split-content', block: block, autoplay_video: section.settings.autoplay_video -%}
              </div>
            {%- endfor -%}
          {%- endif -%}

        </div>
      {%- endif -%}

    </div>
  </div>
</section>

{%- capture content_snippet -%}
{%- endcapture -%}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let mainSwiper, rightSwiper;

    // YouTube API Integration
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    const firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    window.slideshowVideoPlayers = {};

    window.onYouTubeIframeAPIReady = function() {
      document.querySelectorAll('iframe[src*="youtube"]').forEach(iframe => {
        const id = iframe.id;
        if (id) {
          window.slideshowVideoPlayers[id] = new YT.Player(id, {
            events: {
              'onStateChange': onPlayerStateChange
            }
          });
        }
      });
    };

    function onPlayerStateChange(event) {
      // Find the Swiper instance related to this video
      const iframe = event.target.getIframe();
      const swiperSlide = iframe.closest('.swiper-slide');
      const swiperContainer = iframe.closest('.swiper');
      
      if (swiperContainer && swiperContainer.swiper) {
        if (event.data === YT.PlayerState.PLAYING) {
          if (swiperContainer.swiper.autoplay.running) {
            swiperContainer.swiper.autoplay.stop();
            console.log('Swiper paused for YouTube');
          }
        } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
          // Only resume if original autoplay setting was true (checked by data-attr)
          if (swiperContainer.dataset.autoplay === 'true') {
            swiperContainer.swiper.autoplay.start();
            console.log('Swiper resumed from YouTube');
          }
        }
      }
    }

    const initSwiperSplit = () => {
      // 1. Initialize Main Swiper (Left)
      const elMain = document.querySelector('#swiper-{{ section.id }}');
      if (elMain && window.Swiper && !elMain.classList.contains('swiper-initialized')) {
        mainSwiper = initSingleSwiper(elMain, '{{ section.id }}');
      }

      // 2. Initialize Right Swiper (if in Carousel Mode)
      const elRight = document.querySelector('#swiper-right-{{ section.id }}');
      if (elRight && window.Swiper && !elRight.classList.contains('swiper-initialized')) {
        rightSwiper = initSingleSwiper(elRight, 'right_{{ section.id }}');
      }
    };

    const initSingleSwiper = (el, uniqueKey) => {
      const autoplay = el.dataset.autoplay === 'true';
      const speed = parseInt(el.dataset.speed) || 5000;
      const showNav = el.dataset.navigation === 'true';
      const showPag = el.dataset.pagination === 'true';
      let direction = el.dataset.direction || 'horizontal';

      // Force horizontal on mobile to prevent scroll hijacking
      if (window.innerWidth < 992) {
        direction = 'horizontal';
      }

      let nextEl, prevEl, pagEl;

      if (uniqueKey.startsWith('right_')) {
        nextEl = `.swiper-button-next-${uniqueKey}`;
        prevEl = `.swiper-button-prev-${uniqueKey}`;
        pagEl = `.swiper-pagination-${uniqueKey}`;
      } else {
        nextEl = `.swiper-button-next_${uniqueKey}`;
        prevEl = `.swiper-button-prev_${uniqueKey}`;
        pagEl = `.swiper-pagination_${uniqueKey}`;
      }

      return new Swiper(el, {
        slidesPerView: 1,
        loop: true,
        direction: direction,
        autoplay: autoplay ? { delay: speed, disableOnInteraction: false } : false,
        navigation: showNav ? {
          nextEl: nextEl,
          prevEl: prevEl,
        } : false,
        pagination: showPag ? {
          el: pagEl,
          clickable: true,
          bulletClass: 'swiper-pagination-bullet',
          bulletActiveClass: 'swiper-pagination-bullet-active',
        } : false,
        on: {
          init: function() {
            el.classList.add('ap-object-loaded');
            
            // Auto-Pause Logic for HTML5 Videos
            const swiperInstance = this;
            const videos = el.querySelectorAll('video');
            
            videos.forEach(video => {
              video.addEventListener('play', () => {
                if (swiperInstance.autoplay.running) {
                  swiperInstance.autoplay.stop();
                  console.log('Swiper paused for video');
                }
              });
              
              video.addEventListener('pause', () => {
                // Only resume if it was supposed to be autoplaying
                if (autoplay) {
                  swiperInstance.autoplay.start();
                  console.log('Swiper resumed after video pause');
                }
              });
              
              video.addEventListener('ended', () => {
                if (autoplay) {
                  swiperInstance.autoplay.start();
                }
              });
            });
          }
        }
      });
    }

    initSwiperSplit();
    document.addEventListener('shopify:section:load', initSwiperSplit);

    // Re-check direction on resize
    let lastWidth = window.innerWidth;
    window.addEventListener('resize', () => {
       const newWidth = window.innerWidth;
       const breakpoint = 992;
       
       // Reload instances if crossing breakpoint (Vertical <-> Horizontal switch)
       if ((lastWidth < breakpoint && newWidth >= breakpoint) || 
           (lastWidth >= breakpoint && newWidth < breakpoint)) {
         
         if (mainSwiper) mainSwiper.destroy(true, true);
         if (rightSwiper) rightSwiper.destroy(true, true);
         
         // Cleanup classes
         document.querySelectorAll('.slideshow-split .swiper').forEach(el => el.classList.remove('swiper-initialized', 'ap-object-loaded'));
         
         initSwiperSplit();
       }
       lastWidth = newWidth;
    });
  });
</script>

{% schema %}
{
  "name": "Slideshow Split",
  "tag": "section",
  "class": "shopify-section--slideshow-split",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width",
      "default": true
    },
    {
      "type": "number",
      "id": "content_width",
      "label": "Content width",
      "default": 1800
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color"
    },
    {
      "type": "text",
      "id": "class",
      "label": "Custom Class"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "desktop_height",
      "min": 200,
      "max": 800,
      "step": 10,
      "unit": "px",
      "label": "Desktop Height",
      "default": 600
    },
    {
      "type": "range",
      "id": "slideshow_width",
      "min": 30,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Slideshow Width (Desktop)",
      "default": 65
    },
    {
      "type": "range",
      "id": "gap",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Gap between banners",
      "default": 16
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Border Radius",
      "default": 8
    },
    {
      "type": "select",
      "id": "right_mode",
      "label": "Right Side Layout",
      "options": [
        {
          "value": "stacked",
          "label": "Stacked (2 Static Items)"
        },
        {
          "value": "carousel",
          "label": "Carousel (Slider)"
        }
      ],
      "default": "stacked",
      "info": "Choose 'Stacked' for 2 fixed banners, or 'Carousel' to slide multiple items."
    },
    {
      "type": "select",
      "id": "right_slide_direction",
      "label": "Right Slide Direction (Desktop)",
      "options": [
        {
          "value": "horizontal",
          "label": "Horizontal"
        },
        {
          "value": "vertical",
          "label": "Vertical"
        }
      ],
      "default": "horizontal",
      "info": "Vertical sliding is forced to Horizontal on mobile to prevent scroll issues."
    },
    {
      "type": "select",
      "id": "mobile_aspect_ratio",
      "label": "Mobile Video Aspect Ratio",
      "options": [
        { "value": "auto", "label": "Auto (Natural)" },
        { "value": "16 / 9", "label": "Landscape (16:9)" },
        { "value": "1 / 1", "label": "Square (1:1)" },
        { "value": "4 / 5", "label": "Portrait (4:5)" },
        { "value": "9 / 16", "label": "Full Portrait (9:16)" }
      ],
      "default": "1 / 1",
      "info": "Controls the shape of video slides on mobile."
    },
    {
      "type": "header",
      "content": "Slideshow Settings"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable Slideshow Autoplay",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "autoplay_video",
      "label": "Auto-Play Videos",
      "default": true,
      "info": "If enabled, videos play automatically (muted). If disabled, controls are shown."
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 3,
      "max": 10,
      "step": 1,
      "unit": "s",
      "label": "Autoplay Speed",
      "default": 5
    },
    {
      "type": "checkbox",
      "id": "show_navigation",
      "label": "Show Navigation Arrows",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_pagination",
      "label": "Show Pagination Dots",
      "default": true
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "text",
      "id": "margin_desktop",
      "label": "Margin Desktop",
      "default": "60px 0"
    },
    {
      "type": "text",
      "id": "margin_tablet",
      "label": "Margin Tablet",
      "default": "40px 0"
    },
    {
      "type": "text",
      "id": "margin_mobile",
      "label": "Margin Mobile",
      "default": "30px 0"
    },
    {
      "type": "text",
      "id": "padding_desktop",
      "label": "Padding Desktop"
    },
    {
      "type": "text",
      "id": "padding_tablet",
      "label": "Padding Tablet"
    },
    {
      "type": "text",
      "id": "padding_mobile",
      "label": "Padding Mobile"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Left Slide (Main)",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "video",
          "id": "video",
          "label": "Video (Hosted)",
          "info": "Upload a Shopify-hosted video. Replaces the image if set."
        },
        {
          "type": "video_url",
          "id": "video_url",
          "label": "External Video URL",
          "accept": ["youtube", "vimeo"],
          "info": "YouTube or Vimeo URL. Replaces Image/Hosted Video if set."
        },
        {
          "type": "checkbox",
          "id": "show_controls",
          "label": "Show Video Controls",
          "default": false
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link",
          "info": "Link does not work with videos if controls are enabled."
        }
      ]
    },
    {
      "type": "static_banner",
      "name": "Right Slide (Side)",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "video",
          "id": "video",
          "label": "Video (Hosted)",
          "info": "Upload a Shopify-hosted video. Replaces the image if set. Best for vertical videos."
        },
        {
          "type": "video_url",
          "id": "video_url",
          "label": "External Video URL",
          "accept": ["youtube", "vimeo"],
          "info": "YouTube or Vimeo URL. Replaces Image/Hosted Video if set."
        },
        {
          "type": "checkbox",
          "id": "show_controls",
          "label": "Show Video Controls",
          "default": false
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link",
          "info": "Link does not work with videos if controls are enabled."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Slideshow Split",
      "blocks": [
        { "type": "slide" },
        { "type": "slide" },
        { "type": "static_banner" },
        { "type": "static_banner" }
      ]
    }
  ]
}
{% endschema %}

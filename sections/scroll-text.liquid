{%- liquid
  assign scroll_type = section.settings.scroll_type
  assign speed = section.settings.speed
  assign size = section.settings.size_text
  assign size_icon = section.settings.size_icon
  assign space_image = section.settings.space_image
  assign radius_image = section.settings.radius_image
-%}
<style>
    .customstyle{{ section.id }}{
        --g-radius-image : {{ radius_image }}px;
    }
    .customstyle{{ section.id }} .textscroll-item .image-content__image{
      width: {{ size_icon }}px;
      border-radius:var(--g-radius-image);
    }
    .customstyle{{ section.id }} .textscroll-item{
      grid: auto / auto-flow auto max-content;
      place-items: center;
      display: grid;
      animation-duration: {{ speed }}s;
    }
    .customstyle{{ section.id }} .type-outline{
        -webkit-text-stroke: 1px {{ section.settings.text }};
        -webkit-text-fill-color: transparent;
    }
    .customstyle{{ section.id }} .textscroll-item .h6 {
      font-size: 14px;
      line-height: 26px;
    }
    .textscroll-item span.p {
      font-size: 14px;
      line-height: 20px;
      font-weight: 700;
    }
    span.h5.type-solid {
      padding-right: 75px;
    }
    .text-scroll a:hover {
      color: var(--g-main);
    }
</style>

{% render 'section-style' %}

<section class="scroling-section customstyle{{ section.id }}">
    <div class="text-scroll">
      {%- for i in (1..10) -%}
        <span class="textscroll-item {% if scroll_type == 'from-left' %} anim-loop-left {% else %} anim-loop-right {% endif %}">
        {%- for block in section.blocks -%}
          <span style="color: {{ section.settings.text }}" class="{{ size }} type-{{ block.settings.text_style }} {% if block.settings.image == blank %}{{ space_image }}{% endif %} mb-0 d-flex align-items-center">
          {% if block.settings.image != blank %}
            <img class="image-content__image {{ space_image }}"
              src="{{ block.settings.image | image_url: width: 240 }}"
              alt="{{ block.settings.image.alt | escape }}"
              loading="lazy"
              width="{{ block.settings.image.width }}"     
              height="{{ block.settings.image.height }}">
          {% endif %}
            {{ block.settings.code }}
          </span>
        {%- endfor -%} 
      </span>
    {%- endfor -%}
    </div>
</section>

{% schema %}
{
  "name": "Scroll Text",
  "tag": "section",
  "settings": [
    {
      "type": "color",
      "id": "background-color",
      "default": "#ffffff",
      "label": "t:sections.all.background-color.label"
    },
    {
      "type": "color",
      "id": "text",
      "label": "Text color",
      "default": "#000"
    },
    {
      "type": "text",
      "id": "margin_desktop",
      "label": "t:sections.all.margin_desktop.label",
      "info": "t:sections.all.margin_desktop.info"
    },
    {
      "type": "text",
      "id": "margin_tablet_large",
      "label": "Margin tablet larger",
      "default": "0px 0px 0px 0px",
      "info": "Example: 0px 0px 0px 0px"
    },
    {
      "type": "text",
      "id": "margin_mobile",
      "label": "t:sections.all.margin_mobile.label",
      "info": "t:sections.all.margin_mobile.info"
    },
    {
      "type": "text",
      "id": "padding_desktop",
      "label": "t:sections.all.padding_desktop.label",
      "info": "t:sections.all.padding_desktop.info"
    },
    {
      "type": "text",
      "id": "padding_tablet_lager",
      "label": "Padding tablet larger",
      "default": "0px 0px 0px 0px",
      "info": "Example: 0px 0px 0px 0px"
    },
    {
      "type": "text",
      "id": "padding_mobile",
      "label": "t:sections.all.padding_mobile.label",
      "info": "t:sections.all.padding_mobile.info"
    },
    {
      "type": "select",
      "id": "size_text",
      "default": "heading h3",
      "options": [
        {
          "value": "heading h1",
          "label": "H1"
        },
        {
          "value": "heading h2",
          "label": "H2"
        },
        {
          "value": "heading h3",
          "label": "H3"
        },
        {
          "value": "heading h4",
          "label": "H4"
        },
        {
          "value": "heading h5",
          "label": "H5"
        },
        {
          "value": "heading h6",
          "label": "H6"
        },
        {
          "value": "sub-heading",
          "label": "Sub heading"
        },
        {
          "value": "p",
          "label": "Body"
        }
      ],
      "label": "Text Size"
    },
    {
      "type": "header",
      "content": "Auto - Scrolling",
      "info": "This config only work with Auto - Scrolling"
    },
    {
      "type": "range",
      "id": "speed",
      "label": "Scrolling Speed",
      "unit": "s",
      "min": 1,
      "max": 30,
      "step": 1,
      "default": 10,
      "info": "Auto - Scrolling"
    },
    {     
      "type": "select",
      "id": "scroll_type",
      "default": "from-right",
      "options": [
        {
          "value": "from-left",
          "label": "From Left"   
        },
        {
          "value": "from-right",
          "label": "From Right"
        }
      ],
      "label": "Scroll Animation",
      "info": "Auto - Scrolling"
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "range",
      "id": "size_icon",
      "label": "Icon Size",
      "unit": "px",
      "min": 4,
      "max": 120,
      "step": 4,
      "default": 24
    },
    {
      "type": "range",
      "id": "radius_image",
      "min": 0,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "Radius Image",
      "default": 0
    },
    {
      "type": "select",
      "id": "space_image",
      "default": "mx-20",
      "options": [
        {
          "value": "mx-0",
          "label": "0"
        },
        {
          "value": "mx-10",
          "label": "1"
        },
        {
          "value": "mx-20",
          "label": "2"
        },
        {
          "value": "mx-30",
          "label": "3"
        },
        {
          "value": "mx-40",
          "label": "4"
        },
        {
          "value": "mx-50",
          "label": "5"
        }
      ],
      "label": "Margin Right"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Item",
      "settings": [
        {
          "type": "textarea",
          "id": "code",
          "label": "Text",
          "default": "Promo Text"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Icon"
        },
        {
          "type": "select",
          "id": "text_style",
          "default": "solid",
          "options": [
            {
              "value": "solid",
              "label": "Solid"
            },
            {
              "value": "outline",
              "label": "Outline"
            }
          ],
          "label": "Text Style"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Scroll Text"
    }
  ]
}
{% endschema %}
{% render 'section-style' %}
{%- assign id = '#shopify-section-' | append: section.id -%}
{{ 'video-popup.css' | asset_url | stylesheet_tag }}



<style>




{{ id }} {
      {%- if section.settings.background_repeat -%}
        background-repeat: repeat;
      {%- else -%}
        background-repeat: no-repeat;
      {%- endif -%}
      {%- if section.settings.background_size != "default" and section.settings.background_size != "custom" -%}
        background-size: {{ section.settings.background_size }};
      {%- endif -%}
      {%- if section.settings.background_size == "custom" -%}
        background-size: {{ section.settings.background_size_custom }}%;
      {%- endif -%}
      {%- if section.settings.background_position != "custom" -%}
        background-position: {{ section.settings.background_position }};
      {%- else -%}
        background-position-x: {{ section.settings.background_position_x }};
        background-position-y: {{ section.settings.background_position_y }};
      {%- endif -%}
    }

/* {{ id }}::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 257px;
  background-color: #fff;
} */


{{ id }} .cover-image {
  border-radius: {{ section.settings.cover_image_rounded |  append: 'px' }};
      min-height: {{ section.settings.cover_image_height |  append: 'px' }}
}

@media (max-width: 767px) {
  {{ id }} .cover-image {
      min-height: {{ section.settings.cover_image_height_mobile |  append: 'px' }}
}
}


</style>

<div class="video-popup-section">

    <div class="shopify-container">
      {%- case section.settings.section_header_type -%}
    {%- when 'section-header-2' -%}
      {%- render 'section-header-2' -%}
    {%- when 'section-header-3' -%}
      {%- render 'section-header-3' -%}
    {%- else -%}
      {%- render 'section-header' -%}
  {%- endcase -%}

  <div class="video-wrapper">
    <div class="video-overlay" {% if section.settings.data_aos != 'none' %}
      data-aos="{{ section.settings.data_aos }}"
    {% endif %}>
      {%- if section.settings.cover_image != blank -%}
        {% comment %} <img src="{{ section.settings.cover_image | image_url: width: 3840 }}" alt="{{ section.settings.video_title }}" class="cover-image"> {% endcomment %}

        {{ section.settings.cover_image |  image_url: width: section.settings.cover_image.width |  image_tag: class: 'cover-image' }}
      {%- else -%}
        <div class="placeholder">No cover image</div>
      {%- endif -%}
      <div class="video-content">
        
        {%- if section.settings.icon_play != blank -%}
          <div class="btn_play" onclick="openLightbox()" style="--color: {{ section.settings.button_icon_color }}; --bg-color: {{ section.settings.button_icon_bg }}">

                <svg viewBox="0 0 100 100" width="180" height="180">
                  <defs>
                    <path id="circle"
                      d="
                        M 50, 50
                        m -37, 0
                        a 37,37 0 1,1 74,0
                        a 37,37 0 1,1 -74,0"/>
                  </defs>
                  <text font-size="16">
                    <textPath xlink:href="#circle">
                      {{ section.settings.button_play_text }}
                    </textPath>
                  </text>
                </svg>

                <span class="icon_play">
                  {{ section.settings.icon_play }}
                </span>

          </div>

        {%- endif -%}


        {%- if section.settings.video_heading != blank -%}
          <h2 class="video__heading" style="color: {{ section.settings.video_heading_color }}">
            {{ section.settings.video_heading }}
          </h2>
        {%- endif -%}



      </div>
    </div>
  </div>


<div id="video-lightbox" class="lightbox" style="display: none;">
  <div class="lightbox-content">
    <span class="close" onclick="closeLightbox()">&times;</span>
    {%- if section.settings.video_url.type == 'youtube' -%}
      <iframe id="video-iframe" title="{{ section.settings.video_title }}" src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?playsinline=1&autoplay=1&playlist={{ section.settings.video_url.id }}&enablejsapi=1&rel=0&modestbranding=1&origin={{ shop.url }}" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe>
    {%- else -%}
      <iframe id="video-iframe" src="https://player.vimeo.com/video/{{ section.settings.video_url.id }}" class="js-vimeo" allow="autoplay; encrypted-media" allowfullscreen title="{{ section.settings.video_title }}"></iframe>
    {%- endif -%}
  </div>
</div>

</div>
</div>




<script>
function openLightbox() {
  document.getElementById('video-lightbox').style.display = 'flex';
}

function closeLightbox() {
  document.getElementById('video-lightbox').style.display = 'none';
}
</script>

{% schema %}
{
  "name": "Video Popup",
  "settings": [
    {
      "type": "header",
      "content": "Section settings"
    },
    {
          "type": "checkbox",
          "id": "full_width",
          "label": "Full width",
          "default": false
        },
       {
        "type": "number",
        "id": "content_width",
        "label": "Content width",
        "default": 1290
       },
      {
        "type": "text",
        "id": "section_class",
        "label": "class"
      },
      {
        "type": "color",
        "id": "background_color",
        "label": "t:sections.all.background-color.label"
      },
      {
        "type": "image_picker",
        "id": "background_image",
        "label": "t:sections.all.background_image.label"
      },
      {
      "type": "checkbox",
      "id": "background_repeat",
      "label": "Background repeat",
      "default": false
    }, {
      "type": "select",
      "id": "background_size",
      "label": "Background size",
      "options": [
        {
          "value": "default",
          "label": "Default"
        }, {
          "value": "auto",
          "label": "Auto"
        }, {
          "value": "cover",
          "label": "Cover"
        }, {
          "value": "contain",
          "label": "Contain"
        }, {
          "value": "custom",
          "label": "Custom"
        }
      ],
      "default": "default"
    },
    {
      "type": "number",
      "id": "background_size_custom",
      "label": "Background size custom",
      "default": 100
    },
    {
      "type": "select",
      "id": "background_position",
      "label": "Background position",
      "options": [
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "top left",
          "label": "Top Left"
        },
        {
          "value": "top center",
          "label": "Top Center"
        },
        {
          "value": "top right",
          "label": "Top right"
        },
        {
          "value": "center left",
          "label": "Center Left"
        }, {
          "value": "center right",
          "label": "Center Right"
        },
        {
          "value": "bottom left",
          "label": "Bottom Left"
        },
        {
          "value": "bottom center",
          "label": "Bottom Center"
        },
        {
          "value": "bottom right",
          "label": "Bottom Right"
        }, {
          "value": "custom",
          "label": "Custom"
        }
      ],
      "default": "center"
    },
    {
      "type": "text",
      "id": "background_position_x",
      "label": "Background position x"
    }, {
      "type": "text",
      "id": "background_position_y",
      "label": "Background position y"
    },
      {
        "type": "text",
        "id": "margin_desktop",
        "label": "t:sections.all.margin_desktop.label",
        "info": "t:sections.all.margin_desktop.info"
      }, {
        "type": "text",
        "id": "margin_tablet",
        "label": "t:sections.all.margin_tablet.label",
        "info": "t:sections.all.margin_tablet.info"
      }, {
        "type": "text",
        "id": "margin_mobile",
        "label": "t:sections.all.margin_mobile.label",
        "info": "t:sections.all.margin_mobile.info"
      }, {
        "type": "text",
        "id": "padding_desktop",
        "label": "t:sections.all.padding_desktop.label",
        "info": "t:sections.all.padding_desktop.info"
      }, {
        "type": "text",
        "id": "padding_tablet",
        "label": "t:sections.all.padding_tablet.label",
        "info": "t:sections.all.padding_tablet.info"
      }, {
        "type": "text",
        "id": "padding_mobile",
        "label": "t:sections.all.padding_mobile.label",
        "info": "t:sections.all.padding_mobile.info"
      }, {
          "type": "header",
          "content": "Title settings"
        },
        {
          "type": "liquid",
          "id": "title_content",
          "label": "Content"
        },
        {
          "type": "number",
          "id": "title_font_size",
          "label": "Font size",
          "default": 14
        },
        {
          "type": "number",
          "id": "title_line_height",
          "label": "Line height (px)",
          "default": 20
        },
        {
          "type": "select",
          "id": "title_font_weight",
          "label": "Font weight",
          "default": "normal",
          "options": [
            {
              "value": "normal",
              "label": "Normal"
            },
            {
              "value": "400",
              "label": "400"
            },
            {
              "value": "500",
              "label": "500"
            },
            {
              "value": "600",
              "label": "600"
            },
            {
              "value": "700",
              "label": "700"
            }
          ]
        },
        {
          "type": "select",
          "id": "title_text_transform",
          "label": "Text transform",
          "default": "none",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "uppercase",
              "label": "Uppercase"
            },
            {
              "value": "lowercase",
              "label": "Lowercase"
            },
            {
              "value": "capitalize",
              "label": "Capitalize"
            }
          ]
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Color"
        },
        {
          "type": "number",
          "id": "title_space",
          "label": "Title space (px)",
          "default": 10
        },
        {
        "type": "number",
        "id": "title_space_tablet",
        "label": "Title space tablet (px)",
        "default": 30
      },
        {
          "type": "number",
          "id": "title_space_mobile",
          "label": "Title space mobile (px)",
          "default": 10
        },
        {
          "type": "header",
          "content": "Heading settings"
        },
        {
          "type": "image_picker",
          "id": "image_in_heading",
          "label": "Image in heading"
        },
        {
          "type": "liquid",
          "id": "heading_content",
          "label": "Content"
        },
        {
          "type": "number",
          "id": "heading_font_size",
          "label": "Font size",
          "default": 40
        },
        {
          "type": "number",
          "id": "heading_font_size_tablet",
          "label": "Font size tablet",
          "default": 30
        },
        {
          "type": "number",
          "id": "heading_font_size_mobile",
          "label": "Font size mobile",
          "default": 30
        },
        {
          "type": "text",
          "id": "heading_line_height",
          "label": "Line height"
        },
        {
          "type": "select",
          "id": "heading_font_weight",
          "label": "Font weight",
          "default": "normal",
          "options": [
            {
              "value": "normal",
              "label": "Normal"
            },
            {
              "value": "400",
              "label": "400"
            },
            {
              "value": "500",
              "label": "500"
            },
            {
              "value": "600",
              "label": "600"
            },
            {
              "value": "700",
              "label": "700"
            }
          ]
        },
        {
          "type": "select",
          "id": "heading_text_transform",
          "label": "Text transform",
          "default": "none",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "uppercase",
              "label": "Uppercase"
            },
            {
              "value": "lowercase",
              "label": "Lowercase"
            },
            {
              "value": "capitalize",
              "label": "Capitalize"
            }
          ]
        },
        {
          "type": "color",
          "id": "heading_color",
          "label": "Color"
        },
        {
          "type": "number",
          "id": "heading_width",
          "label": "Heading max width",
          "default": 0
        },
        {
          "type": "number",
          "id": "heading_space",
          "label": "Heading space"
        },
        {
          "type": "header",
          "content": "Description settings"
        },
        {
          "type": "liquid",
          "id": "description_content",
          "label": "Content"
        },
        {
          "type": "number",
          "id": "description_font_size",
          "label": "Font size",
          "default": 16
        },
        {
          "type": "number",
          "id": "description_line_height",
          "label": "Line height",
          "default": 24
        },
        {
          "type": "color",
          "id": "description_color",
          "label": "Color"
        },
        {
          "type": "number",
          "id": "description_width",
          "label": "Description max width",
          "default": 0
        },
        {
          "type": "number",
          "id": "description_space",
          "label": "Description space"
        }, {
        "type": "liquid",
        "id": "button_text",
        "label": "Button text"
      }, {
        "type": "url",
        "id": "button_url",
        "label": "Button url"
      }, {
        "type": "select",
        "id": "button_style",
        "label": "Button style",
        "default": "btn__type--1",
        "options": [
          {
            "value": "btn__type--1",
            "label": "Button style 1"
          }, {
            "value": "btn__type--2",
            "label": "Button style 2"
          }
        ]
      }, {
        "type": "color",
        "id": "button_color",
        "label": "Button color"
      }, {
        "type": "color",
        "id": "button_bg_color",
        "label": "Button background color"
      }, {
        "type": "color",
        "id": "button_color_hover",
        "label": "Button color hover"
      }, {
        "type": "color",
        "id": "button_bg_color_hover",
        "label": "Button background color hover"
      }, {
        "type": "number",
        "id": "section_header_space",
        "label": "Section header space",
        "default": 60
      }, {
        "type": "number",
        "id": "section_header_space_mobile",
        "label": "Section header space mobile",
        "default": 40
      }, {
        "type": "select",
        "id": "section_header_type",
        "label": "Section header type",
        "options": [
          {
            "value": "section-header-1",
            "label": "Section header 1"
          }, {
            "value": "section-header-2",
            "label": "Section header 2"
          }, {
            "value": "section-header-3",
            "label": "Section header 3"
          }
        ], "default": "section-header-1"
      },   {
        "type": "select",
        "id": "text_align",
        "label": "Text align",
        "default": "start",
        "options": [
          {
            "value": "start",
            "label": "Left"
          }, {
            "value": "center",
            "label": "Center"
          }, {
            "value": "end",
            "label": "Right"
          }
        ]
      }, {
        "type": "select",
        "id": "direction_header",
        "label": "Direction header",
        "default": "vertical",
        "options": [
          {
            "value": "horizontal",
            "label": "Horizontal"
          }, {
            "value": "vertical",
            "label": "Vertical"
          }
        ]
      }, {
        "type": "select",
        "id": "align_items",
        "label": "Align items",
        "default": "start",
        "options": [
          {
            "value": "start",
            "label": "Start"
          }, {
            "value": "center",
            "label": "Center"
          }, {
            "value": "end",
            "label": "End"
          }
        ]
      }, {
        "type": "checkbox",
        "id": "reverse",
        "label": "Enable reverse",
        "default": false
      }, {
        "type": "select",
        "id": "data_aos_text",
        "label": "Data Aos header text",
        "default": "none",
        "options": [
          {
            "value": "none",
            "label": "none"
          },
          {
            "value": "fade-up",
            "label": "fade-up"
          },
          {
            "value": "fade-down",
            "label": "fade-down"
          },
          {
            "value": "fade-right",
            "label": "fade-right"
          }, {
            "value": "fade-left",
            "label": "fade-left"
          }, {
            "value": "flip-left",
            "label": "flip-left"
          }, {
            "value": "flip-right",
            "label": "flip-right"
          }, {
            "value": "flip-up",
            "label": "flip-up"
          }, {
            "value": "flip-down",
            "label": "flip-down"
          }, {
            "value": "zoom-in",
            "label": "zoom-in"
          }, {
            "value": "zoom-in-up",
            "label": "zoom-in-up"
          }, {
            "value": "zoom-in-down",
            "label": "zoom-in-down"
          }, {
            "value": "zoom-in-left",
            "label": "zoom-in-left"
          }, {
            "value": "zoom-in-right",
            "label": "zoom-in-right"
          }, {
            "value": "zoom-out",
            "label": "zoom-out"
          }, {
            "value": "zoom-out-up",
            "label": "zoom-out-up"
          }, {
            "value": "zoom-out-down",
            "label": "zoom-out-down"
          }, {
            "value": "zoom-out-left",
            "label": "zoom-out-left"
          }, {
            "value": "zoom-out-right",
            "label": "zoom-out-right"
          }
        ]
      },
      {
        "type": "header",
        "content": "Video settings"
      },
    {
      "type": "video_url",
      "id": "video_url",
      "label": "Video URL",
      "accept": [
        "youtube",
        "vimeo"
      ]
    },
    {
      "type": "text",
      "id": "video_title",
      "label": "Video Title"
    },
    {
      "type": "image_picker",
      "id": "cover_image",
      "label": "Cover Image"
    },
    {
      "type": "number",
      "id": "cover_image_rounded",
      "label": "Cover Image Rounded",
      "default": 0
    },
    {
      "type": "number",
      "id": "cover_image_height",
      "label": "Cover image height",
      "default": 500
    },
    {
      "type": "number",
      "id": "cover_image_height_mobile",
      "label": "Cover image height mobile",
      "default": 500
    },
    {
          "type": "liquid",
          "id": "icon_play",
          "label": "Button icon play"
        },
        {
          "type": "text",
          "id": "button_play_text",
          "label": "Button play text"
        }, {
          "type": "color",
          "id": "button_icon_color",
          "label": "Button color",
          "default": "#fff"
        },
        {
          "type": "color",
          "id": "button_icon_bg",
          "label": "Button background"
        }, {
          "type": "liquid",
          "id": "video_heading",
          "label": "Video heading"
        }, {
          "type": "color",
          "id": "video_heading_color",
          "label": "Video heading color",
          "default": "#fff"
        }, {
      "type": "header",
      "content": "Data Aos Settings"
    }, {
          "type": "select",
          "id": "data_aos",
          "label": "Data Aos",
          "default": "none",
          "options": [
            {
              "value": "none",
              "label": "none"
            },
            {
              "value": "fade-up",
              "label": "fade-up"
            },
            {
              "value": "fade-down",
              "label": "fade-down"
            },
            {
              "value": "fade-right",
              "label": "fade-right"
            },
            {
              "value": "fade-left",
              "label": "fade-left"
            },
            {
              "value": "flip-left",
              "label": "flip-left"
            },
            {
              "value": "flip-right",
              "label": "flip-right"
            },
            {
              "value": "flip-up",
              "label": "flip-up"
            },
            {
              "value": "flip-down",
              "label": "flip-down"
            },
            {
              "value": "zoom-in",
              "label": "zoom-in"
            },
            {
              "value": "zoom-in-up",
              "label": "zoom-in-up"
            },
            {
              "value": "zoom-in-down",
              "label": "zoom-in-down"
            },
            {
              "value": "zoom-in-left",
              "label": "zoom-in-left"
            },
            {
              "value": "zoom-in-right",
              "label": "zoom-in-right"
            },
            {
              "value": "zoom-out",
              "label": "zoom-out"
            },
            {
              "value": "zoom-out-up",
              "label": "zoom-out-up"
            },
            {
              "value": "zoom-out-down",
              "label": "zoom-out-down"
            },
            {
              "value": "zoom-out-left",
              "label": "zoom-out-left"
            },
            {
              "value": "zoom-out-right",
              "label": "zoom-out-right"
            }
          ]
        }
  ],
  "presets": [
    {
      "name": "Video Popup"
    }
  ]
}
{% endschema %}